<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>UniVerso | Campus</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f0f0f0;
        margin: 0;
        padding: 0;
        text-align: center;
        overflow-x: hidden;
      }

      #menu, #tips, #mapa {
        padding: 40px 20px;
      }
      #menu h1 {
        font-size: 2em;
        margin-bottom: 20px;
      }
      button {
        margin: 10px;
        padding: 12px 20px;
        font-size: 1em;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background: #0056b3;
        color: white;
        transition: background 0.3s;
      }
      button:hover {
        background: #003d80;
      }

      /* Container do Unity */
      #unity-container {
        display: none;
        margin: auto;
        background: #000;
        width: 100%;
        height: 100vh;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      #unity-canvas {
        width: 100%;
        height: 100%;
        max-width: 960px;
        max-height: 600px;
      }
      #unity-footer {
        margin-top: 10px;
      }

      /* Dicas */
      #tips {
        display: none;
        text-align: left;
        max-width: 600px;
        margin: auto;
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
      }
      #tips h2 {
        text-align: center;
      }

      /* Mapa */
      #mapa {
        display: none;
        max-width: 900px;
        margin: auto;
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
      }
      #mapa h2 {
        text-align: center;
        margin-bottom: 20px;
      }
      #mapa img {
        max-width: 100%;
        height: auto;
        border: 1px solid #ccc;
        border-radius: 8px;
      }

      /* Menu lateral (hamburger) */
      #sideMenu {
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1000;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.3s;
        padding-top: 60px;
      }
      #sideMenu button {
        padding: 12px 20px;
        font-size: 1.2em;
        color: white;
        display: block;
        border: none;
        background: none;
        text-align: left;
        width: 100%;
        cursor: pointer;
      }
      #sideMenu button:hover {
        background: #333;
      }
      #menuBtn {
        position: fixed;
        top: 15px;
        left: 15px;
        font-size: 24px;
        background: #0056b3;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 8px 12px;
        cursor: pointer;
        z-index: 1100;
      }

      /* Responsividade */
      @media (max-width: 768px) {
        #menu h1 {
          font-size: 1.4em;
        }
        button {
          width: 90%;
          max-width: 300px;
        }
        #unity-canvas {
          width: 100% !important;
          height: auto !important;
        }
        #sideMenu {
          width: 100% !important; /* ocupa toda a tela no celular */
        }
      }
    </style>
  </head>
  <body>

    <!-- BOT√ÉO HAMBURGER -->
    <button id="menuBtn">‚ò∞</button>

    <!-- MENU LATERAL -->
    <div id="sideMenu">
      <button onclick="startGame()">‚ñ∂ Jogar</button>
      <button onclick="showTips()">‚Ñπ Dicas</button>
      <button onclick="showMapa()">üó∫ Mapa do Campus</button>
      <button onclick="exitGame()">‚ùå Sair</button>
      <button onclick="closeMenu()">‚¨Ö Fechar</button>
    </div>

    <!-- MENU INICIAL -->
    <div id="menu">
      <h1>üéì Bem-vindo ao UniVerso</h1>
      <p>Descubra o campus, aprenda sobre a universidade e explore o curso de Administra√ß√£o.</p>
      <button id="play-btn">‚ñ∂ Jogar</button>
      <button id="tips-btn">‚Ñπ Dicas</button>
    </div>

    <!-- TELA DE DICAS -->
    <div id="tips">
      <h2>Dicas sobre a Universidade e o Curso</h2>
      <ul>
        <li>üìö Aproveite a biblioteca e os laborat√≥rios para refor√ßar seus estudos.</li>
        <li>ü§ù Participe de projetos de extens√£o e pesquisa para enriquecer sua forma√ß√£o.</li>
        <li>üé§ Compare√ßa √†s semanas acad√™micas e eventos para networking.</li>
        <li>üí° Converse com veteranos e professores: eles podem dar dicas valiosas.</li>
        <li>üíº Busque est√°gios cedo: a experi√™ncia pr√°tica faz toda a diferen√ßa.</li>
      </ul>
      <button onclick="voltarMenu()">‚¨Ö Voltar</button>
    </div>

    <!-- TELA DO MAPA -->
    <div id="mapa">
      <h2>Mapa do Campus Central da UFRN</h2>
      <img src="assets/images/mapa-ufrn.jpg" alt="Mapa do Campus UFRN">
      <br><br>
      <button onclick="voltarMenuMapa()">‚¨Ö Voltar</button>
    </div>

    <!-- UNITY GAME -->
    <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas" tabindex="-1"></canvas>
      <div id="unity-footer">
        <button id="fullscreen-btn">üî≥ Tela Cheia</button>
      </div>
    </div>

    <script>
      let unityInstance = null;
      const canvas = document.querySelector("#unity-canvas");
      const unityContainer = document.querySelector("#unity-container");
      const menu = document.querySelector("#menu");
      const tips = document.querySelector("#tips");
      const mapa = document.querySelector("#mapa");
      const sideMenu = document.getElementById("sideMenu");

      // Abrir / fechar menu lateral
      document.getElementById("menuBtn").onclick = () => {
        sideMenu.style.width = sideMenu.style.width === "250px" ? "0" : "250px";
      };
      function closeMenu() {
        sideMenu.style.width = "0";
      }

      function startGame() {
        menu.style.display = "none";
        tips.style.display = "none";
        mapa.style.display = "none";
        unityContainer.style.display = "flex";
        closeMenu();

        if (unityInstance) return; // j√° carregado

        var buildUrl = "Build";
        var loaderUrl = buildUrl + "/2.loader.js";
        var config = {
          dataUrl: buildUrl + "/2.data",
          frameworkUrl: buildUrl + "/2.framework.js",
          codeUrl: buildUrl + "/2.wasm",
          streamingAssetsUrl: "StreamingAssets",
          companyName: "DefaultCompany",
          productName: "Campus",
          productVersion: "0.1.0"
        };

        var script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
          createUnityInstance(canvas, config, (progress) => {
            console.log("Carregando: " + (progress * 100) + "%");
          }).then((instance) => {
            unityInstance = instance;
          }).catch((message) => {
            alert(message);
          });
        };
        document.body.appendChild(script);
      }

      function exitGame() {
        if (unityInstance) {
          unityInstance.Quit().then(() => {
            unityInstance = null;
            unityContainer.style.display = "none";
            menu.style.display = "block";
          });
        } else {
          unityContainer.style.display = "none";
          menu.style.display = "block";
        }
        closeMenu();
      }

      function showTips() {
        menu.style.display = "none";
        unityContainer.style.display = "none";
        mapa.style.display = "none";
        tips.style.display = "block";
        closeMenu();
      }

      function voltarMenu() {
        tips.style.display = "none";
        menu.style.display = "block";
      }

      function showMapa() {
        menu.style.display = "none";
        unityContainer.style.display = "none";
        tips.style.display = "none";
        mapa.style.display = "block";
        closeMenu();
      }

      function voltarMenuMapa() {
        mapa.style.display = "none";
        menu.style.display = "block";
      }

      document.getElementById("play-btn").onclick = startGame;
      document.getElementById("tips-btn").onclick = showTips;
      document.getElementById("fullscreen-btn").onclick = () => {
        if (unityInstance) unityInstance.SetFullscreen(1);
      };
    </script>
  </body>
</html>
